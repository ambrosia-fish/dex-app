let pokemonRepository=(function(){let repository=[];let apiURL='https://pokeapi.co/api/v2/pokemon/?limit=150';function getAll(){return repository};function loadList(){return fetch(apiURL).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url,};add(pokemon)})}).catch(function(e){console.error(e)})}
function add(pokemon){let pokemonList=document.querySelector('.pokemon-list');let listPokemon=document.createElement('li');listPokemon.classList.add('list-group-item');let button=document.createElement('button')
button.innerText=pokemon.name
button.classList.add('btn');button.classList.add('btn-primary');button.setAttribute("data-toggle","modal");button.setAttribute('data-target','#exampleModal');listPokemon.appendChild(button);pokemonList.appendChild(listPokemon);button.addEventListener("click",function(){loadDetails(pokemon)})}
function loadDetails(pokemon){let bioImgUrl,bioHeight,bioWeight;let url=pokemon.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(detail){bioImgUrl=detail.sprites.front_default;bioHeight=detail.height;bioWeight=detail.weight;return{bioImgUrl,bioHeight,bioWeight}}).catch(function(e){console.error(e)}).then(function(){if(bioImgUrl&&bioHeight&&bioWeight){let displayImage=bioImgUrl;let displayHeight=bioHeight;let displayWeight=bioWeight;let modalTitle=document.querySelector('.modal-title');modalTitle.innerText=pokemon.name;let modalBody=document.querySelector('.modal-body');modalBody.innerHTML='<img alt="'+pokemon.name+'" src="'+displayImage+'"></img><br>'+'Height: '+displayHeight+'<br>'+'Weight: '+displayWeight}})};return{getAll:getAll,add:add,loadList:loadList,loadDetails:loadDetails,}}());pokemonRepository.loadList().then(function(){pokemonRepository.getAll()})